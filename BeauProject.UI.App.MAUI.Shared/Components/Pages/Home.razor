@page "/"
@using BeauComponents.Components.Controls
@using System.Data
@using BeauComponents.Components.Controls.Tab
@using static BeauComponents.Components.Classes.BeauEnums
@inject IJSRuntime _js;

<PageTitle>Home</PageTitle>
@* 
<h1>Hello, world!</h1> *@

@* <BeauGridView Name="grid-view" DataTable="BindDt()" OnClickRow="(n) => { Clicked(n, false); }"
              Editable="true" /> *@

<TabSet>
    <TabBox Title="تب اول">
        <p>محتوای تب اول</p>
    </TabBox>
    <TabBox Title="تب دوم">
        <p>محتوای تب دوم</p>
    </TabBox>
    <TabBox Title="تب سوم">
        <p>محتوای تب سوم</p>
    </TabBox>
</TabSet>

@* <table class="android-table">
    <thead>
        <tr>
            <th>ردیف</th>
            <th>نام</th>
            <th>توضیحات</th>
            <th>قیمت</th>
            <th>وضعیت</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1</td>
            <td>کالا A</td>
            <td>توضیحات کوتاه</td>
            <td>150,000 تومان</td>
            <td>موجود</td>
        </tr>
        <tr>
            <td>2</td>
            <td>کالا B</td>
            <td>توضیحات کوتاه</td>
            <td>250,000 تومان</td>
            <td>ناموجود</td>
        </tr>
    </tbody>
</table>

<table class="mac-table">
    <thead>
        <tr>
            <th>ردیف</th>
            <th>نام</th>
            <th>توضیحات</th>
            <th>قیمت</th>
            <th>وضعیت</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1</td>
            <td>کالا A</td>
            <td>توضیحات کوتاه</td>
            <td>150,000 تومان</td>
            <td>موجود</td>
        </tr>
        <tr>
            <td>2</td>
            <td>کالا B</td>
            <td>توضیحات کوتاه</td>
            <td>250,000 تومان</td>
            <td>ناموجود</td>
        </tr>
    </tbody>
</table>

<table class="mac-dark-table">
    <thead>
        <tr>
            <th>ردیف</th>
            <th>نام</th>
            <th>توضیحات</th>
            <th>قیمت</th>
            <th>وضعیت</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1</td>
            <td>کالا A</td>
            <td>توضیحات کوتاه</td>
            <td>150,000 تومان</td>
            <td>موجود</td>
        </tr>
        <tr>
            <td>2</td>
            <td>کالا B</td>
            <td>توضیحات کوتاه</td>
            <td>250,000 تومان</td>
            <td>ناموجود</td>
        </tr>
    </tbody>
</table>

<table class="ubuntu-table">
    <thead>
        <tr>
            <th>ردیف</th>
            <th>نام</th>
            <th>توضیحات</th>
            <th>قیمت</th>
            <th>وضعیت</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1</td>
            <td>کالا A</td>
            <td>توضیحات کوتاه</td>
            <td>150,000 تومان</td>
            <td>موجود</td>
        </tr>
        <tr>
            <td>2</td>
            <td>کالا B</td>
            <td>توضیحات کوتاه</td>
            <td>250,000 تومان</td>
            <td>ناموجود</td>
        </tr>
    </tbody>
</table>

<table class="ios-table">
    <thead>
        <tr>
            <th>ردیف</th>
            <th>نام</th>
            <th>توضیحات</th>
            <th>قیمت</th>
            <th>وضعیت</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1</td>
            <td>کالا A</td>
            <td>توضیحات کوتاه</td>
            <td>150,000 تومان</td>
            <td>موجود</td>
        </tr>
        <tr>
            <td>2</td>
            <td>کالا B</td>
            <td>توضیحات کوتاه</td>
            <td>250,000 تومان</td>
            <td>ناموجود</td>
        </tr>
    </tbody>
</table>

<table class="ios-dark-table">
    <thead>
        <tr>
            <th>ردیف</th>
            <th>نام</th>
            <th>توضیحات</th>
            <th>قیمت</th>
            <th>وضعیت</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1</td>
            <td>کالا A</td>
            <td>توضیحات کوتاه</td>
            <td>150,000 تومان</td>
            <td>موجود</td>
        </tr>
        <tr>
            <td>2</td>
            <td>کالا B</td>
            <td>توضیحات کوتاه</td>
            <td>250,000 تومان</td>
            <td>ناموجود</td>
        </tr>
    </tbody>
</table>

<table class="unix-table">
    <thead>
        <tr>
            <th>ردیف</th>
            <th>نام</th>
            <th>توضیحات</th>
            <th>قیمت</th>
            <th>وضعیت</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1</td>
            <td>کالا A</td>
            <td>توضیحات کوتاه</td>
            <td>150,000 تومان</td>
            <td>موجود</td>
        </tr>
        <tr>
            <td>2</td>
            <td>کالا B</td>
            <td>توضیحات کوتاه</td>
            <td>250,000 تومان</td>
            <td>ناموجود</td>
        </tr>
    </tbody>
</table>

<table class="apple-table">
    <thead>
        <tr>
            <th>ردیف</th>
            <th>نام</th>
            <th>توضیحات</th>
            <th>قیمت</th>
            <th>وضعیت</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1</td>
            <td>کالا A</td>
            <td>توضیحات کوتاه</td>
            <td>150,000 تومان</td>
            <td>موجود</td>
        </tr>
        <tr>
            <td>2</td>
            <td>کالا B</td>
            <td>توضیحات کوتاه</td>
            <td>250,000 تومان</td>
            <td>ناموجود</td>
        </tr>
    </tbody>
</table>

<table class="android-advanced-table">
    <thead>
        <tr>
            <th>ردیف</th>
            <th>نام</th>
            <th>توضیحات</th>
            <th>قیمت</th>
            <th>وضعیت</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1</td>
            <td>کالا A</td>
            <td>توضیحات کوتاه</td>
            <td>150,000 تومان</td>
            <td>موجود</td>
        </tr>
        <tr>
            <td>2</td>
            <td>کالا B</td>
            <td>توضیحات کوتاه</td>
            <td>250,000 تومان</td>
            <td>ناموجود</td>
        </tr>
        <tr>
            <td>3</td>
            <td>کالا C</td>
            <td>توضیحات طولانی‌تر</td>
            <td>320,000 تومان</td>
            <td>موجود</td>
        </tr>
    </tbody>
</table>

<table class="android-modern-table">
    <thead>
        <tr>
            <th>ردیف</th>
            <th>نام</th>
            <th>توضیحات</th>
            <th>قیمت</th>
            <th>وضعیت</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1</td>
            <td>کالا A</td>
            <td>توضیحات کوتاه</td>
            <td>150,000 تومان</td>
            <td>موجود</td>
        </tr>
        <tr>
            <td>2</td>
            <td>کالا B</td>
            <td>توضیحات کوتاه</td>
            <td>250,000 تومان</td>
            <td>ناموجود</td>
        </tr>
        <tr>
            <td>3</td>
            <td>کالا C</td>
            <td>توضیحات طولانی‌تر</td>
            <td>320,000 تومان</td>
            <td>موجود</td>
        </tr>
    </tbody>
</table> *@
<input type="text" id="searchInput" placeholder="جستجو در جدول..." style="margin-bottom:10px; padding:6px 10px; width:300px; border-radius:6px; border:1px solid #ccc; font-size:14px;">

<table id="devexpress-table" class="devexpress-style-table">
    <thead>
        <tr id="table-header">
            <th class="sortable">ردیف</th>
            <th class="sortable">نام</th>
            <th class="sortable">توضیحات</th>
            <th class="sortable">قیمت</th>
            <th class="sortable">وضعیت</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td contenteditable="true">1</td>
            <td contenteditable="true">کالا A</td>
            <td contenteditable="true">توضیحات کوتاه</td>
            <td contenteditable="true">150,000 تومان</td>
            <td contenteditable="true">موجود</td>
        </tr>
        <tr>
            <td contenteditable="true">2</td>
            <td contenteditable="true">کالا B</td>
            <td contenteditable="true">توضیحات کوتاه</td>
            <td contenteditable="true">250,000 تومان</td>
            <td contenteditable="true">ناموجود</td>
        </tr>
        <tr>
            <td contenteditable="true">3</td>
            <td contenteditable="true">کالا C</td>
            <td contenteditable="true">توضیحات طولانی‌تر</td>
            <td contenteditable="true">320,000 تومان</td>
            <td contenteditable="true">موجود</td>
        </tr>
    </tbody>
</table>



@* 
<div>
    <svg class="loading-progress">
        <circle r="40%" cx="50%" cy="50%" />
        <circle r="40%" cx="50%" cy="50%" />
    </svg>
    <div class="loading-progress-text"></div>
</div> *@

<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>


<script>
    // ایجاد Sortable روی هدر جدول
    Sortable.create(document.getElementById('table-header'), {
        animation: 150,
        onEnd: function (evt) {
            const tbody = document.querySelector('#devexpress-table tbody');
            const oldIndex = evt.oldIndex;
            const newIndex = evt.newIndex;

            // برای هر ردیف، سلول‌ها را جابجا می‌کنیم
            tbody.querySelectorAll('tr').forEach(row => {
                const cells = row.children;
                if (oldIndex < newIndex) {
                    row.insertBefore(cells[oldIndex], cells[newIndex + 1]);
                } else {
                    row.insertBefore(cells[oldIndex], cells[newIndex]);
                }
            });
        }
    });

</script>


@code {
    private DataTable BindDt()
    {
        DataTable MyDataTable = new DataTable();
        MyDataTable.Columns.Add("ID", typeof(int));
        MyDataTable.Columns.Add("Name", typeof(string));
        MyDataTable.Columns.Add("Age", typeof(int));

        MyDataTable.Rows.Add(1, "Alice", 25);
        MyDataTable.Rows.Add(2, "Bob", 30);
        MyDataTable.Rows.Add(3, "Charlie", 35);

        return MyDataTable;
    }

    string? value;
    private static DataRowView? selectedRow;
    private DataRowView? Clicked(DataRowView? dataRow, bool stateHasChanged)
    {
        selectedRow = dataRow;
        if (stateHasChanged == true)
            this.StateHasChanged();
        return selectedRow;
    }

    #region Modal
    private bool isModalVisible = false;
    private void ShowModal()
    {
        isModalVisible = true;
    }
    private void OnModalVisibilityChanged(bool visibility)
    {
        isModalVisible = visibility;
    }

    private static DialogResult _dialogResult;
    private void OnModalDialogResultChanged(DialogResult dialogResult)
    {
        _dialogResult = dialogResult;
        this.StateHasChanged();
    }
    #endregion

    private void TabActivated(string title)
    {
        Console.WriteLine($"تب فعال: {title}");
    }
}
